# CLAUDE.md - Lovable Project Context

> This file is generated by `/init-lovable`. Edit to match your project.

## Project Overview

- **Name**: [PROJECT_NAME]
- **Production URL**: [PRODUCTION_URL]
- **Lovable Project URL**: [LOVABLE_PROJECT_URL]
- **GitHub**: [GITHUB_URL]
- **Backend**: [Lovable Cloud / Own Supabase]
- **Supabase Ref**: [SUPABASE_REF] (if own Supabase)

## Workflow Rules

### ✅ Safe to edit and push to `main`:
- All files in `src/` (components, pages, hooks, utils)
- Config files (vite.config.ts, tailwind.config.js)
- Package.json dependencies
- Edge Function **code** in `supabase/functions/`
- Migration **files** in `supabase/migrations/`

### ⚠️ After editing, provide Lovable prompt:
- **Edge Functions**: `"Deploy the [name] edge function"`
- **Migrations**: `"Apply pending Supabase migrations"`

### ❌ Must go through Lovable:
- Create/modify database tables
- Set up RLS policies
- Add secrets (Cloud → Secrets UI)
- Create storage buckets
- Deploy Edge Functions

## Secrets

| Name | Purpose |
|------|---------|
| OPENAI_API_KEY | AI features |
| STRIPE_SECRET_KEY | Payments |
| RESEND_API_KEY | Emails |

## Edge Functions

| Function | Purpose | Required Secrets |
|----------|---------|------------------|
| send-email | Send transactional emails | RESEND_API_KEY |
| process-payment | Handle Stripe webhooks | STRIPE_SECRET_KEY |

## Database Tables

| Table | Purpose |
|-------|---------|
| profiles | User profiles |
| projects | User projects |

## Project Conventions

- Use shadcn/ui components
- Follow existing naming patterns
- Don't modify auth logic without discussion

## Yolo Mode Configuration (Beta)

> ⚠️ Beta feature - uses browser automation to auto-submit Lovable prompts

- **Status**: [on / off]
- **Testing**: [on / off]  # Run verification tests after deployment
- **Debug Mode**: [on / off]  # Verbose logging of automation steps
- **Last Updated**: [timestamp]
- **Operations Covered**:
  - Edge function deployment
  - Migration application

**Configure:** Run `/yolo on/off [--testing|--no-testing] [--debug]`

**How it works:**
- When yolo mode is on, I'll automatically navigate to Lovable and submit prompts
- Testing verifies deployments (3 levels: basic, console errors, functional)
- Debug mode shows detailed browser automation logs
- Always has manual fallback if automation fails

## Quick Prompts Reference

| Task | Lovable Prompt |
|------|----------------|
| Deploy all functions | `"Deploy all edge functions"` |
| Deploy specific | `"Deploy the [name] edge function"` |
| Apply migrations | `"Apply pending Supabase migrations"` |
| Check logs | `"Show logs for [name] edge function"` |
| Fix function | `"The [name] edge function returns [error]. Fix it"` |
| Create table | `"Create a [name] table with columns: [list]"` |
| Add RLS | `"Enable RLS on [table] allowing [who] to [what]"` |
| Add secret | ⚠️ Manual: Cloud → Secrets |

## Branch Rules

- **Only `main` syncs** with Lovable
- Feature branches don't deploy until merged
- Lovable syncs within 1-2 minutes of push

---
*Template from lovable-integration plugin. Run `/init-lovable` to customize.*
