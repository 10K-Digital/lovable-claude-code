# CLAUDE.md - Lovable Project Context

> This file is generated by `/init-lovable`. Edit to match your project.

## Project Overview

- **Name**: [PROJECT_NAME]
- **Production URL**: [PRODUCTION_URL]
- **Lovable Project URL**: [LOVABLE_PROJECT_URL]
- **GitHub**: [GITHUB_URL]
- **Backend**: [Lovable Cloud / Own Supabase]
- **Supabase Ref**: [SUPABASE_REF] (if own Supabase)

## Workflow Rules

### ✅ Safe to edit and push to `main`:
- All files in `src/` (components, pages, hooks, utils)
- Config files (vite.config.ts, tailwind.config.js)
- Package.json dependencies
- Edge Function **code** in `supabase/functions/`
- Migration **files** in `supabase/migrations/`

### ⚠️ After editing, provide Lovable prompt:
- **Edge Functions**: `"Deploy the [name] edge function"`
- **Migrations**: `"Apply pending Supabase migrations"`

### ❌ Must go through Lovable:
- Create/modify database tables
- Set up RLS policies
- Add secrets (Cloud → Secrets UI)
- Create storage buckets
- Deploy Edge Functions

## Secrets

| Name | Purpose | Status | Used In |
|------|---------|--------|---------|
| OPENAI_API_KEY | AI features | ⚠️ Not configured | chat-completion |
| STRIPE_SECRET_KEY | Payments | ⚠️ Not configured | process-payment |
| RESEND_API_KEY | Emails | ✅ In Lovable Cloud | send-email, send-welcome |

**Legend:**
- ✅ In Lovable Cloud - Secret already configured
- ⚠️ Not configured - Needs setup in Cloud → Secrets

**To add secrets:**
1. Go to Cloud → Secrets in Lovable
2. Click "Add secret"
3. Enter name and value
4. Run: `"Redeploy edge functions to pick up new secrets"`

## Edge Functions

| Function | Purpose | Required Secrets | Status |
|----------|---------|------------------|--------|
| send-email | Send transactional emails | RESEND_API_KEY | ✅ Secret configured |
| process-payment | Handle Stripe webhooks | STRIPE_SECRET_KEY | ⚠️ Secret not configured |

**Warning:** Functions marked with ⚠️ will fail until secrets are added in Cloud → Secrets.

## Database Tables

| Table | Purpose |
|-------|---------|
| profiles | User profiles |
| projects | User projects |

## Project Conventions

- Use shadcn/ui components
- Follow existing naming patterns
- Don't modify auth logic without discussion

## Yolo Mode Configuration (Beta)

> ⚠️ Beta feature - uses browser automation to auto-submit Lovable prompts and run tests

- **Status**: [on / off]
- **Deployment Testing**: [on / off]  # Run verification tests after Lovable deployments
- **Auto-run Tests**: [on / off]  # Run project tests after every git push
- **Debug Mode**: [on / off]  # Verbose logging of automation steps
- **Last Updated**: [timestamp]
- **Operations Covered**:
  - Edge function deployment with verification
  - Migration application with verification
  - Automated code testing after every git push

**Configure:** Run `/lovable:yolo on/off [--testing|--no-testing] [--auto-tests|--no-auto-tests] [--debug]`

**How it works:**
- When yolo mode is on, I'll automatically navigate to Lovable and submit prompts
- Deployment testing verifies deployments (3 levels: basic, console errors, functional)
- Auto-run tests execute your project's test suite after every successful git push to main
- Debug mode shows detailed browser automation logs
- Always has manual fallback if automation fails
- Test failures don't block deployments (manual review available)

## Quick Prompts Reference

| Task | Lovable Prompt |
|------|----------------|
| Deploy all functions | `"Deploy all edge functions"` |
| Deploy specific | `"Deploy the [name] edge function"` |
| Apply migrations | `"Apply pending Supabase migrations"` |
| Check logs | `"Show logs for [name] edge function"` |
| Fix function | `"The [name] edge function returns [error]. Fix it"` |
| Create table | `"Create a [name] table with columns: [list]"` |
| Add RLS | `"Enable RLS on [table] allowing [who] to [what]"` |
| Add secret | ⚠️ Manual: Cloud → Secrets |

## Branch Rules

- **Only `main` syncs** with Lovable
- Feature branches don't deploy until merged
- Lovable syncs within 1-2 minutes of push

---
*Template from lovable-integration plugin. Run `/init-lovable` to customize.*
